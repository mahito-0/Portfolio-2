<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <!-- Viewport for mobile scaling + iOS safe area -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
  <meta name="theme-color" content="#161616" />
  <title>Syed Al Mahmud | Portfolio</title>

  <!-- Web fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Montserrat:wght@300;600&display=swap" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" referrerpolicy="no-referrer" />

  <!-- EmailJS SDK v4 -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js" defer></script>

  <style>
/* ===================== THEME VARIABLES ===================== */
/* Default: Dark theme */
:root {
  --bg: #161616;

  --text-1: #f3f4f6;
  --text-2: #cbd5e1;
  --muted: #94a3b8;

  --glass-card: rgba(255, 255, 255, 0);
  --glass-panel: rgba(255, 255, 255, 0);

  --border-1: rgba(255,255,255,0.16);
  --border-2: rgba(255,255,255,0.10);
  --shadow-1: 0 18px 52px rgba(0,0,0,0.45);
  --radius: 16px;

  --accent: #9bbcf9;
  --accent-2: #a78bfa;
  --badge-gold: #d4b86a;
  --badge-green: #9ac8a3;
  --badge-blue: #9bbbe7;

  --panel-width: 70vw;
  --font-size-base: 16px;

  --star-light: rgba(255, 255, 255, 0.8);
}

/* Light theme overrides */
html[data-theme="light"] {
  --bg: #979797;

  --text-1: #0f172a;
  --text-2: #000000;
  --muted: #64748b;

  --glass-card: #cecece;
  --glass-panel: #ffffff;

  --border-1: rgba(15,23,42,0.15);
  --border-2: rgba(15,23,42,0.08);

  --accent: #2563eb;    /* Blue 600 */
  --accent-2: #7c3aed;  /* Violet 600 */

  --star-light: rgb(0, 0, 0);
}

/* ===================== BASE ===================== */
html { font-size: var(--font-size-base); box-sizing: border-box; }
*, *::before, *::after { box-sizing: inherit; }
img, video { max-width: 100%; height: auto; display: block; }

body {
  margin: 0;
  font-family: 'Montserrat', sans-serif;
  background-color: var(--bg);
  color: var(--text-1);
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  overflow-x: hidden;

  display: flex;
  flex-direction: column; /* ensures title sits above the cards */
  justify-content: center;
  align-items: center;

  /* Prevent viewport issues on iOS (safe areas) */
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* Title above cards */
.page-title {
  width: 100%;
  max-width: 1500px;
  margin: 8px auto 30px;
  text-align: center;
  font-family: 'Orbitron', sans-serif;
  font-weight: 900;
  letter-spacing: 0.8px;
  color: var(--text-1);
  font-size: clamp(3rem, 1rem + 2.2vw, 2rem);
}

/* ===================== GRID ===================== */
.container {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-gap: 25px;
  width: 100%;
  max-width: 1600px;
  padding: 16px;
  transition: filter 0.25s ease;
}
.container.blur { filter: blur(3px); pointer-events: none; }

/* ===================== CARD ===================== */
.card {
  border-radius: var(--radius);
  padding: 26px;
  font-weight: 600;
  display: flex;
  flex-direction: column;
  justify-content: center; align-items: center;
  text-align: center;
  transition: transform 0.2s ease, box-shadow 0.25s ease, border-color 0.25s ease, background 0.25s ease;
  opacity: 0; animation: fadeInUp 0.6s forwards;
  position: relative; overflow: hidden; cursor: pointer;

  border: 1px solid var(--border-1);
  background: var(--glass-card);
  box-shadow: var(--shadow-1);

  min-height: 96px;
}
.card:active { transform: translateY(-2px) scale(0.99); }
.card:hover { transform: translateY(-6px); border-color: var(--border-1); }

/* Arrow */
.arrow {
  margin-top: 12px;
  font-size: 24px;
  font-weight: 400;
  color: var(--muted);
  transition: transform 0.2s ease, color 0.2s ease;
}
.card:hover .arrow { transform: translateX(4px); color: var(--text-2); }

/* Grid placement */
.logo { grid-column: 1/ span 2; grid-row: 1; animation-delay: 0.05s; }
.education  { grid-column: 3; grid-row: 1; animation-delay: 0.1s; }
.skills{ grid-column: 4;  grid-row: 1; animation-delay: 0.15s; }
.projects { grid-column: 1; grid-row: 2 / span 2; animation-delay: 0.2s; }
.involvements { grid-column: 2; grid-row: 2; animation-delay: 0.25s; }
.research { grid-column: 3; grid-row: 2; animation-delay: 0.3s; }
.contact { grid-column: 4; grid-row: 2 / span 2; animation-delay: 0.35s; }
.github { grid-column: 2/ span 2; grid-row: 3; animation-delay: 0.4s; }

/* ===================== PANEL (MODAL) ===================== */
.info-panel {
  position: fixed; top: 50%; left: 50%;
  transform: translate(-50%, -50%) scale(0.96);
  width: var(--panel-width); max-height: 80vh;
  border-radius: 20px;
  padding: 26px;
  box-shadow: 0 18px 60px rgba(0,0,0,0.5);
  border: 1px solid var(--border-1);
  z-index: 100;
  opacity: 0; visibility: hidden;
  transition: opacity 0.25s ease, transform 0.25s ease, visibility 0.25s ease;
  overflow-y: auto; overscroll-behavior: contain; -webkit-overflow-scrolling: touch;

  background: var(--glass-panel);
  backdrop-filter: blur(10px) saturate(130%);
  -webkit-backdrop-filter: blur(10px) saturate(130%);

  padding-bottom: calc(26px + env(safe-area-inset-bottom));
}
.info-panel.active { opacity: 1; visibility: visible; transform: translate(-50%, -50%) scale(1); }

/* Center title at the top, keep close button on the right */
.info-panel .panel-header {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  margin-bottom: 14px;
  border-bottom: 1px solid var(--border-2);
  padding-bottom: 12px;
}

.info-panel .panel-title {
  grid-column: 1 / -1;    /* span all columns */
  justify-self: center;   /* center horizontally */
  text-align: center;
  margin: 0;
}

.info-panel .close-btn {
  grid-column: 3;         /* right column */
  justify-self: end;
}

/* Lighter shadow in light mode */
html[data-theme="light"] .info-panel {
  box-shadow: 0 16px 40px rgba(2,6,23,0.12);
}

.panel-header {
  display: flex; justify-content: space-between; align-items: center;
  margin-bottom: 14px; border-bottom: 1px solid var(--border-2); padding-bottom: 12px;
}
.panel-title {
  font-family: 'Orbitron', sans-serif;
  font-size: 1.6rem; color: var(--text-1); margin: 0;
  align-items: center;
}

.close-btn { background: transparent; border: none; color: white; font-size: 1.5rem; cursor: pointer; transition: transform 0.3s ease; }
 
.close-btn:hover { transform: rotate(90deg);}

.panel-content { line-height: 1.7; color: var(--text-2); word-break: break-word;}
.panel-content h3 {
  color: var(--text-1); margin-top: 18px;
  font-family: 'Orbitron', sans-serif; font-size: 1.15rem;
}
.panel-content p { margin-bottom: 12px; }
/* Only color normal links inside panels, not social buttons */
.panel-content a:not(.social-link) {
  color: var(--accent);
  text-decoration: none;
  transition: color 0.2s ease;
}
.panel-content a:not(.social-link):hover {
  color: var(--accent-2);
}
.panel-content ul { padding-left: 18px; }
.panel-content li { margin-bottom: 8px; }

/* Overlay */
.panel-overlay {
  position: fixed; inset: 0;
  background: rgba(0,0,0,0.55);
  backdrop-filter: blur(2px);
  z-index: 99; opacity: 0; visibility: hidden;
  transition: opacity 0.2s ease, visibility 0.2s ease;
}
.panel-overlay.active { opacity: 1; visibility: visible; }

/* ===================== HEADINGS ===================== */
h2 {
  font-family: 'Orbitron', sans-serif;
  font-weight: 700; font-size: 1.6rem;
  margin: 0; letter-spacing: 0.5px; color: var(--text-1);
}
.card span { font-size: 1.05rem; letter-spacing: 0.5px; color: var(--text-2); }

/* Subtitle typing */
.typing-subtitle {
  margin-top: 8px;
  font-size: 0.95rem;
  color: var(--muted);
  opacity: 0.95;
  min-height: 1.2em;
}

/* ===================== TECH TAGS ===================== */
.tech-stack { display: flex; flex-wrap: wrap; gap: 8px; margin: 12px 0; }
.tech-tag {
  background: rgba(255,255,255,0.06);
  color: var(--text-2);
  padding: 6px 10px;
  border-radius: 8px;
  font-size: 0.9rem;
  border: 1px solid var(--border-2);
}
html[data-theme="light"] .tech-tag {
  background: #fff;
  border-color: var(--border-2);
}

/* ===================== TIMELINE ===================== */
.timeline-item { margin-bottom: 20px; position: relative; padding-left: 26px; }
.timeline-item::before {
  content: ''; position: absolute; left: 0; top: 7px;
  height: 12px; width: 12px; border-radius: 50%; background: var(--accent);
}
.timeline-item::after {
  content: ''; position: absolute; left: 5.5px; top: 20px;
  height: calc(100% - 20px); width: 1px; background: var(--border-2);
}
.timeline-item:last-child::after { display: none; }
.timeline-date { color: var(--muted); font-weight: 600; margin-bottom: 4px; }
.timeline-title { color: var(--text-1); font-weight: 600; margin-bottom: 4px; }

/* ===================== PROJECTS ===================== */
.projects-container, #projects-list {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: 16px; margin-top: 14px;
}
.project-card {
  background: rgba(255, 255, 255, 0);
  padding: 14px;
  border-radius: 12px;
  transition: transform 0.18s ease, box-shadow 0.18s ease, border-color 0.18s ease, background 0.18s ease;
  border: 1px solid var(--border-2);
  backdrop-filter: blur(6px) saturate(115%); -webkit-backdrop-filter: blur(6px) saturate(115%);
}
.project-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 28px rgba(0,0,0,0.28);
  border-color: var(--border-1);

}
html[data-theme="light"] .project-card {
  background: #ffffff;
  box-shadow: 0 6px 16px rgba(2,6,23,0.06);
}
html[data-theme="light"] .project-card:hover {
  background: #ffffff;
  border-color: var(--border-1);
}

.project-image {
  width: 100%; aspect-ratio: 16/9; overflow: hidden; border-radius: 8px; margin-bottom: 10px;
  background: rgba(255,255,255,0.04); display: grid; place-items: center;
  border: 1px solid var(--border-2);
}
.project-image img { width: 100%; height: 100%; object-fit: cover; display: block; }

.project-card h4, .repo-link-title { margin: 6px 0; font-size: 1.02rem; color: var(--text-1); }
.project-card h4 a, .repo-link { color: var(--text-1); text-decoration: none; }
.project-card h4 a:hover, .repo-link:hover { color: var(--accent); }

.repo-description { margin: 6px 0 10px 0; color: var(--text-2); font-size: 0.95em; min-height: 2.6em; }
.project-meta { display: flex; flex-wrap: wrap; gap: 8px; font-size: 0.85em; color: var(--muted); align-items: center; margin-bottom: 8px; }
.badge {
  display: inline-flex; align-items: center; gap: 4px;
  padding: 4px 8px; border-radius: 999px;
  background: rgba(255,255,255,0.04);
  border: 1px solid var(--border-2);
  color: var(--text-2);
}
.stars { color: var(--badge-gold); }
.forks { color: var(--badge-green); }
.dates { color: var(--badge-blue); }

/* Contributions grid */
html[data-theme="light"] #contributions-grid img {
  filter: invert(1) hue-rotate(180deg);
}

/* ===================== SOCIAL LINKS ===================== */
/* Utility: screen-reader-only */
.sr-only {
  position: absolute !important;
  width: 1px; height: 1px;
  padding: 0; margin: -1px; overflow: hidden;
  clip: rect(0, 0, 1px, 1px); border: 0;
}

/* Social links (use theme tokens, remove undefined variables) */
.social-links {
  display: flex;
  gap: 1rem;
  margin-top: 8px;
  font-size: 1.4rem;
  flex-wrap: wrap;
}

.social-link {
  display: grid;
  place-items: center;
  width: 48px; height: 48px;
  border-radius: 12px;
  border: 1px solid var(--border-1);
  background: var(--glass-card);
  color: var(--text-1);
  transition: transform 0.2s ease, color 0.2s ease, background 0.2s ease, border-color 0.2s ease;
}
.social-link:hover {
  transform: translateY(-1px) scale(1.08);
  background:rgba(255, 255, 255, 0);
  border-color: var(--border-1);
}

/* Contact form container */
.contact-form {
  margin-top: 14px;
}

/* Letter layout: 2-column responsive */
.letter {
  display: grid;
  grid-template-columns: 1.2fr 1fr;
  gap: 20px;
  padding: 20px;
  background: transparent;
}
.letter .side {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Inputs */
.letter textarea,
.letter input[type="text"],
.letter input[type="email"] {
  width: 100%;
  padding: 12px 14px;
  background-color: rgba(255, 255, 255, 0.05);
  border: 1px solid var(--border-1);
  border-radius: 8px;
  color: var(--text-1);
  font-size: 16px;
  outline: none;
  resize: vertical;
  backdrop-filter: blur(4px);
  transition: border-color 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
}
.letter textarea { min-height: 160px; }
.letter input:focus, .letter textarea:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
}

/* Submit button */
.letter button {
  padding: 12px 22px;
  min-width: 140px;
  min-height: 44px;
  font-size: 16px;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  background: linear-gradient(90deg, var(--accent), var(--accent-2));
  color: #0f1115;
  font-weight: 800;
  transition: transform 0.15s ease, filter 0.2s ease;
}
.letter button:hover { transform: translateY(-1px) scale(1.03); }
.letter button:disabled { opacity: 0.6; cursor: not-allowed; }

/* Result message */
.result-message {
  margin-top: 8px;
  display: none;
  font-weight: 600;
}

/* Responsive */
@media (max-width: 900px) {
  .letter { grid-template-columns: 1fr; }
}

/* ===================== ANIMATIONS ===================== */
@keyframes fadeInUp { 0% { opacity: 0; transform: translateY(16px); } 100% { opacity: 1; transform: translateY(0); } }

/* ===================== PARTICLES ===================== */
.particles { position: absolute; width: 100%; height: 100%; top: 0; left: 0; pointer-events: none; z-index: -1; }
.particle {
  position: absolute; background: var(--star-light); border-radius: 50%;
  animation: twinkle 5s infinite; box-shadow: 0 0 6px rgba(255,255,255,0.4);
}
@keyframes twinkle { 0%, 100% { opacity: 0.2; } 50% { opacity: 0.9; } }

/* ===================== IMAGE MODAL ===================== */
#img-modal {
  position: fixed; inset: 0; display: none; align-items: center; justify-content: center;
  background: rgba(0,0,0,0.85); z-index: 1000; backdrop-filter: blur(4px);
}
#img-modal .img-modal-content {
  position: relative; max-width: 90vw; max-height: 90vh; overflow: hidden; display: grid; place-items: center;
  background: rgba(255,255,255,0.06);
  border: 1px solid var(--border-1); border-radius: 12px;
  backdrop-filter: blur(10px) saturate(130%); -webkit-backdrop-filter: blur(10px) saturate(130%);
}
#modal-img { max-width: 90vw; max-height: 90vh; transition: transform 0.1s ease-out; touch-action: none; cursor: grab; user-select: none; }
.img-modal-close {
  position: absolute; top: -40px; right: 0;
  background: rgba(255,255,255,0.06); color: var(--text-1);
  border: 1px solid var(--border-1); backdrop-filter: blur(3px);
  padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 1.1rem; min-height: 44px;
}
html[data-theme="light"] #img-modal .img-modal-content { background: #fff; }
html[data-theme="light"] .img-modal-close { background: #fff; color: var(--text-1); }

/* ===================== CUSTOM CURSOR ===================== */
.custom-cursor {
  position: fixed; top: 0; left: 0;
  width: 18px; height: 18px; border: 2px solid rgba(255,255,255,0.65);
  border-radius: 50%; pointer-events: none; transform: translate(-50%, -50%);
  transition: width 0.15s ease, height 0.15s ease, background 0.15s ease, border 0.15s ease;
  z-index: 2000; mix-blend-mode: difference;
}
.custom-cursor.clickable-hover { width: 26px; height: 26px; background: rgba(255,255,255,0.12); border-color: rgba(255,255,255,0.55); }
html[data-theme="light"] .custom-cursor { border-color: rgba(0,0,0,0.55); mix-blend-mode: normal; }

/* ===================== CONTACT FORM ===================== */
.contact-form { margin-top: 14px; display: grid; gap: 10px; }
.contact-form input, .contact-form textarea {
  width: 100%; padding: 10px 12px;
  background: rgba(255,255,255,0.05); color: var(--text-1);
  border: 1px solid var(--border-1); border-radius: 8px; outline: none;
  backdrop-filter: blur(4px); -webkit-backdrop-filter: blur(4px);
}
.contact-form input::placeholder, .contact-form textarea::placeholder { color: var(--muted); }
.contact-form button {
  padding: 12px 16px; border-radius: 8px;
  background: linear-gradient(90deg, var(--accent), var(--accent-2));
  color: #0f1115; border: none; font-weight: 700; cursor: pointer;
  min-height: 44px; touch-action: manipulation;
}
.result-message { display: none; color: var(--badge-green); font-weight: 600; }

/* ===================== THEME TOGGLE ===================== */
.theme-toggle {
  position: fixed;
  right: 16px;
  bottom: calc(16px + env(safe-area-inset-bottom));
  z-index: 1100;
  width: 48px; height: 48px; border-radius: 50%;
  display: grid; place-items: center; cursor: pointer;
  border: 1px solid var(--border-1);
  background: var(--glass-card);
  color: var(--text-1);
  box-shadow: 0 8px 20px rgba(0,0,0,0.28);
}
.theme-toggle:hover { transform: translateY(-2px); }

/* ===================== FOCUS ===================== */
a:focus-visible, button:focus-visible, .card:focus-visible, .social-link:focus-visible, .theme-toggle:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 3px; border-radius: 10px;
}

/* ===================== SKILLS CAROUSEL (Scoped to #skillsPanel) ===================== */
#skillsPanel .skills-carousel {
  width: 100%;
  position: relative;
  overflow: hidden;
  gap: 1rem;
}

#skillsPanel .skills-track {
  overflow: hidden;
  position: relative;
  margin-bottom: 2rem;
}

#skillsPanel .skills-inner {
  display: flex;
  width: max-content;
  will-change: transform;
}

#skillsPanel .top-track .skills-inner {
  animation: skillsScrollLeftToRight 40s linear infinite;
}

#skillsPanel .bottom-track .skills-inner {
  animation: skillsScrollRightToLeft 40s linear infinite;
}

#skillsPanel .skill-item {
  width: 120px;
  height: 120px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0);
  border-radius: 20px;
  box-shadow: 0 10px 20px rgba(0,0,0,0.1);
  transition: all 0.3s ease;
  flex-shrink: 0;
  margin: 0 1rem;
}

#skillsPanel .skill-item:hover {
  transform: translateY(-10px) scale(1.1);
  box-shadow: 0 15px 30px rgba(0,0,0,0.2);
}

#skillsPanel .skill-item img {
  width: 80%;
  height: auto;
  object-fit: contain;
  filter: grayscale(30%);
  transition: filter 0.3s ease;
}

#skillsPanel .skill-item:hover img {
  filter: grayscale(0%);
}

@keyframes skillsScrollLeftToRight {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}

@keyframes skillsScrollRightToLeft {
  0% { transform: translateX(-50%); }
  100% { transform: translateX(0); }
}

#skillsPanel .skills-carousel:hover .skills-inner {
  animation-play-state: paused;
}

@media (max-width: 992px) {
  #skillsPanel .skill-item {
    width: 100px;
    height: 100px;
  }
}

@media (max-width: 768px) {
  #skillsPanel .skill-item {
    width: 80px;
    height: 80px;
    border-radius: 15px;
  }
  #skillsPanel .skills-track {
    margin-bottom: 1.5rem;
  }
}

@media (max-width: 480px) {
  #skillsPanel .skill-item {
    width: 70px;
    height: 70px;
    border-radius: 12px;
    padding: 0.8rem;
    margin: 0 0.5rem;
  }
  #skillsPanel .skills-inner {
    animation-duration: 30s !important;
  }
}

/* ===================== REDUCED MOTION ===================== */
@media (prefers-reduced-motion: reduce) {
  * { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; scroll-behavior: auto !important; }
}

/* ==== Panel split layout with right-side image ==== */
.panel-split {
  display: grid;
  grid-template-columns: minmax(0, 1.4fr) minmax(220px, 0.9fr);
  gap: 18px;
  align-items: start;
}
.panel-media .media-frame {
  border: 1px solid var(--border-1);
  border-radius: 12px;
  background: rgba(255,255,255,0.04);
  overflow: hidden;
  aspect-ratio: 4 / 3;
}
.panel-media img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}
.panel-media .caption {
  font-size: 0.9rem;
  color: var(--muted);
  margin-top: 8px;
  text-align: center;
}

/* download button below image */
.panel-media .media-actions {
  margin-top: 10px;
  display: flex;
  justify-content: center;
}
.download-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  min-height: 40px;
  border-radius: 10px;
  background: var(--glass-card);
  border: 1px solid var(--border-2);
  color: var(--text-1);
  font-weight: 800;
  text-decoration: none;
  transition: transform 0.15s ease, filter 0.2s ease;
}
.download-btn:hover {
  transform: translateY(-1px) scale(1.03);
}
html[data-theme="light"] .panel-media .media-frame {
  background: #fff;
  border-color: var(--border-2);
}

@media (max-width: 900px) {
  .panel-split {
    grid-template-columns: 1fr;
  }
}

/* ===================== RESPONSIVE ===================== */
@media (max-width: 1200px) { :root { --panel-width: 80vw; } }
@media (max-width: 900px) {
  .container { grid-template-columns: repeat(2, 1fr); grid-gap: 16px; }
  .logo { grid-column: 1 / span 2; grid-row: 1; }
  .skills { grid-column: 1; grid-row: 2; }
  .education { grid-column: 2; grid-row: 2; }
  .projects { grid-column: 1; grid-row: 3; }
  .involvements { grid-column: 2; grid-row: 3; }
  .research { grid-column: 1; grid-row: 4; }
  .contact { grid-column: 2; grid-row: 4; }
  .github { grid-column: 1; grid-row: 5; }
  :root { --panel-width: 90vw; }
}
@media (max-width: 768px) {
  .container { grid-template-columns: 1fr; grid-gap: 14px; }
  .logo, .skills, .education, .projects, .involvements, .research, .contact, .github { grid-column: 1; }
  .logo { grid-row: 1; } .skills { grid-row: 2; } .education { grid-row: 3; }
  .projects { grid-row: 4; } .involvements { grid-row: 5; } .research { grid-row: 6; }
  .contact { grid-row: 7; } .github { grid-row: 8; }

  .info-panel { width: 94vw; max-height: 86vh; padding: 20px; }
  .panel-title { font-size: 1.4rem; }
}
@media (max-width: 500px) {
  .info-panel { padding: 18px; }
  .panel-title { font-size: 1.3rem; }
}
  </style>
</head>

<body>
  <!-- Background particles -->
  <div class="particles" id="particles"></div>

  <!-- Hidden on touch devices -->
  <div class="custom-cursor"></div>
  
  <h1 class="page-title" aria-label="Professional Portfolio">Professional Portfolio</h1>
  <!-- Cards grid -->
  <div class="container" aria-live="polite">
    <div class="card logo" data-panel="about" aria-controls="aboutPanel">
      <h2>SYED AL MAHMUD</h2>
      <div id="typingText" class="typing-subtitle"></div>
    </div>
    <div class="card skills" data-panel="skills" aria-controls="skillsPanel">
      <span>TECH SKILLS</span>
      <div class="arrow">→</div>
    </div>
    <div class="card education" data-panel="education" aria-controls="educationPanel">
      <span>EDUCATION</span>
      <div class="arrow">→</div>
    </div>
    <div class="card projects" data-panel="projects" aria-controls="projectsPanel">
      <span>PROJECTS</span>
      <div class="arrow">→</div>
    </div>
    <div class="card involvements" data-panel="involvements" aria-controls="involvementsPanel">
      <span>INVOLVEMENTS</span>
      <div class="arrow">→</div>
    </div>
    <div class="card research" data-panel="research" aria-controls="researchPanel">
      <span>RESEARCH</span>
      <div class="arrow">→</div>
    </div>
    <div class="card github" data-panel="github" aria-controls="githubPanel">
      <span>GITHUB</span>
      <div class="arrow">→</div>
    </div>
    <div class="card contact" data-panel="contact" aria-controls="contactPanel">
      <span>CONTACT</span>
      <div class="arrow">→</div>
    </div>
  </div>

  <!-- Panels -->
  <div class="panel-overlay" id="panelOverlay" aria-hidden="true"></div>

  <div class="info-panel" id="aboutPanel" role="dialog" aria-modal="true" aria-labelledby="aboutTitle" aria-hidden="true">
    <div class="panel-header">
      <h2 class="panel-title" id="aboutTitle">ABOUT ME</h2>
      <button class="close-btn" aria-label="Close">&times;</button>
    </div>
    <div class="panel-content">
      <div class="panel-split">
        <div>
          <p><strong>Hello_!!!</strong></p>
          <p>I, a third-year CSE student at AIUB with a strong focus on software and game development. Passionate about crafting efficient algorithms and developing interactive applications, 
            I strive to create innovative solutions that combine performance with user engagement.</p>
          
          <h3>Personal Details</h3>
          <ul>
            <li><strong>Location:</strong> Dhaka, Bangladesh</li>
            <li><strong>Birthdate:</strong> 31 October 2001</li>
            <li><strong>Email:</strong><a href="mailto:mahmud.agni@gmail.com"> mahmud.agni@gmail.com</a></li>
            <li><strong>Current Status:</strong> Student at AIUB (3rd-year CSE)</li>
          </ul>
        </div>

        <aside class="panel-media">
          <div class="media-frame">
            <img
              src="img/IMG.jpg"
              alt="Photo of Syed Al Mahmud"
              class="clickable-img"
              data-clickable="true"
              loading="lazy"
              decoding="async"
              onerror="this.onerror=null;this.src='data:image/svg+xml;utf8,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 400 300%22%3E%3Cdefs%3E%3ClinearGradient id=%22g%22 x1=%220%22 x2=%221%22%3E%3Cstop offset=%220%22 stop-color=%22%2300f7ff%22/%3E%3Cstop offset=%221%22 stop-color=%22%23ff00f7%22/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width=%22100%25%22 height=%22100%25%22 fill=%22%23101525%22 /%3E%3Crect x=%2212%22 y=%2212%22 width=%22376%22 height=%22276%22 rx=%228%22 fill=%22url(%23g)%22 opacity=%220.12%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 dominant-baseline=%22middle%22 text-anchor=%22middle%22 fill=%22%232b3d52%22 font-family=%22Montserrat, sans-serif%22 font-size=%2216%22%3ENo%20preview%20image%3C/text%3E%3C/svg%3E';"
            />
          </div>
        </aside>
      </div>
    </div>
  </div>

  <div class="info-panel" id="skillsPanel" role="dialog" aria-modal="true" aria-labelledby="skillsTitle" aria-hidden="true">
    <div class="panel-header">
      <h2 class="panel-title" id="skillsTitle">TECHNICAL SKILLS</h2>
      <button class="close-btn" aria-label="Close">&times;</button>
    </div>
    <div class="panel-content">
      <div class="skills-carousel" aria-label="Skills carousel" role="region">
        <!-- Top Row (Left to Right) -->
        <div class="skills-track top-track">
          <div class="skills-inner">
            <!-- Programming Languages -->
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/cplusplus/cplusplus-original.svg" alt="C++" title="C++">
            </div>
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/csharp/csharp-original.svg" alt="C#" title="C#">
            </div>
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/java/java-original.svg" alt="Java" title="Java">
            </div>
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/python/python-original.svg" alt="Python" title="Python">
            </div>
            
            <!-- Frameworks & Libraries -->
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/opengl/opengl-original.svg" alt="OpenGL" title="OpenGL">
            </div>
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/dot-net/dot-net-original.svg" alt=".NET" title=".NET">
            </div>
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/react/react-original.svg" alt="React" title="React">
            </div>
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/nodejs/nodejs-original.svg" alt="Node.js" title="Node.js">
            </div>
            
            <!-- Databases -->
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/mysql/mysql-original.svg" alt="MySQL" title="MySQL">
            </div>
            
            <!-- Duplicates for seamless looping -->
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/cplusplus/cplusplus-original.svg" alt="C++" title="C++">
            </div>
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/csharp/csharp-original.svg" alt="C#" title="C#">
            </div>
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/java/java-original.svg" alt="Java" title="Java">
            </div>
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/python/python-original.svg" alt="Python" title="Python">
            </div>
          </div>
        </div>
        
        <!-- Bottom Row (Right to Left) -->
        <div class="skills-track bottom-track">
          <div class="skills-inner">
            <!-- Web Technologies -->
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/html5/html5-original.svg" alt="HTML" title="HTML">
            </div>
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/css3/css3-original.svg" alt="CSS" title="CSS">
            </div>
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg" alt="JavaScript" title="JavaScript">
            </div>
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/typescript/typescript-original.svg" alt="TypeScript" title="TypeScript">
            </div>
            
            <!-- DevOps & Cloud -->
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/docker/docker-original.svg" alt="Docker" title="Docker">
            </div>
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/googlecloud/googlecloud-original.svg" alt="Google Cloud" title="Google Cloud">
            </div>
            
            <!-- Tools & Platforms -->
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/git/git-original.svg" alt="Git" title="Git">
            </div>
            <div class="skill-item">
              <img src="https://avatars.githubusercontent.com/u/18677500?v=4" alt="GitHub" title="GitHub">
            </div>
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/gitlab/gitlab-original.svg" alt="GitLab" title="GitLab">
            </div>
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/linux/linux-original.svg" alt="Linux" title="Linux">
            </div>
            
            <!-- Duplicates for seamless looping -->
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/html5/html5-original.svg" alt="HTML" title="HTML">
            </div>
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/css3/css3-original.svg" alt="CSS" title="CSS">
            </div>
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg" alt="JavaScript" title="JavaScript">
            </div>
            <div class="skill-item">
              <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/typescript/typescript-original.svg" alt="TypeScript" title="TypeScript">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="info-panel" id="educationPanel" role="dialog" aria-modal="true" aria-labelledby="educationTitle" aria-hidden="true">
    <div class="panel-header">
      <h2 class="panel-title" id="educationTitle">EDUCATION</h2>
      <button class="close-btn" aria-label="Close">&times;</button>
    </div>
    <div class="panel-content">
      <div class="timeline-item">
        <span class="timeline-date">2023 – Present</span>
        <span class="timeline-title">American International University-Bangladesh (AIUB)</span>
        <p>B.Sc. in Computer Science & Engineering</p>
        <p>Focus on software development, algorithms, and systems design</p>
      </div>
      
      <div class="timeline-item">
        <span class="timeline-date">2019 – 2021</span>
        <span class="timeline-title">Sherpur Govt. University College, Sherpur</span>
        <p>Higher Secondary Certificate (Science)</p>
        <p>Physics, Math, ICT</p>
      </div>
      
      <div class="timeline-item">
        <span class="timeline-date">2017 – 2019</span>
        <span class="timeline-title">Nabarun Public School, Sherpur</span>
        <p>Secondary School Certificate (Science)</p>
        <p>Developed early interest in computing</p>
      </div>
    </div>
  </div>

  <div class="info-panel" id="projectsPanel" role="dialog" aria-modal="true" aria-labelledby="projectsTitle" aria-hidden="true">
    <div class="panel-header">
      <h2 class="panel-title" id="projectsTitle">PROJECTS</h2>
      <button class="close-btn" aria-label="Close">&times;</button>
    </div>
    <div class="panel-content">
      <div class="tech-stack">
        <span class="tech-tag">Game Development</span>
        <span class="tech-tag">Web Applications</span>
        <span class="tech-tag">Algorithms</span>
        <span class="tech-tag">Interactive Systems</span>
      </div>
      <!-- Dynamic projects grid -->
      <div id="projects-list" class="projects-container" aria-live="polite"></div>
      <!-- Template for project cards -->
      <template id="card-template">
        <div class="project-card">
          <div class="project-image">
            <!-- IMPORTANT: src set dynamically; loading=lazy set via JS -->
            <img src="" alt="Project image" class="clickable-img"/>
          </div>
          <h4 class="repo-link-title"></h4>
          <p class="repo-description"></p>
          <div class="project-meta">
            <span class="repo-stars badge stars"></span>
            <span class="repo-forks badge forks"></span>
          </div>
          <a class="repo-link" href="#" target="_blank" rel="noopener noreferrer">View on GitHub</a>
        </div>
      </template>
    </div>
  </div>

  <div class="info-panel" id="involvementsPanel" role="dialog" aria-modal="true" aria-labelledby="involvementsTitle" aria-hidden="true">
    <div class="panel-header">
      <h2 class="panel-title" id="involvementsTitle">INVOLVEMENTS</h2>
      <button class="close-btn" aria-label="Close">&times;</button>
    </div>
    <div class="panel-content">
      <div class="panel-split">
        <div>
          <h3>Poster Presentation</h3>
          <p><strong>Topic:</strong> Nanotechnology: Unlocking the Potential of the Microscopic World</p>
          <p><strong>Award:</strong> Best Poster – Physics Poster Contest, AIUB (2023)</p>
          
          <h4>Contributions:</h4>
          <ul>
            <li>Explored nanotech uses in medicine, electronics, and energy</li>
            <li>Summarized key milestones and future outlook</li>
            <li>Delivered presentation at AIUB</li>
          </ul>
        </div>

        <aside class="panel-media">
          <div class="media-frame">
            <img
              src="img/NanotechPoster.jpg"
              alt="Nanotechnology poster presented at AIUB"
              class="clickable-img"
              data-clickable="true"
              loading="lazy"
              decoding="async"
              onerror="this.onerror=null;this.src='data:image/svg+xml;utf8,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 400 300%22%3E%3Cdefs%3E%3ClinearGradient id=%22g%22 x1=%220%22 x2=%221%22%3E%3Cstop offset=%220%22 stop-color=%22%2300f7ff%22/%3E%3Cstop offset=%221%22 stop-color=%22%23ff00f7%22/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width=%22100%25%22 height=%22100%25%22 fill=%22%23101525%22 /%3E%3Crect x=%2212%22 y=%2212%22 width=%22376%22 height=%22276%22 rx=%228%22 fill=%22url(%23g)%22 opacity=%220.12%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 dominant-baseline=%22middle%22 text-anchor=%22middle%22 fill=%22%232b3d52%22 font-family=%22Montserrat, sans-serif%22 font-size=%2216%22%3ENo%20preview%20image%3C/text%3E%3C/svg%3E';"
            />
          </div>
          <div class="caption">Nanotechnology Poster</div>
          <div class="media-actions">
            <a
              href="assets/NanotechPoster.zip"
              class="download-btn"
              download
              aria-label="Download Nanotechnology Poster ZIP"
              data-clickable="true"
            >
              <i class="fa-solid fa-file-zipper" aria-hidden="true"></i>
              Download ZIP
            </a>
          </div>
        </aside>
      </div>
    </div>
  </div>

  <div class="info-panel" id="researchPanel" role="dialog" aria-modal="true" aria-labelledby="researchTitle" aria-hidden="true">
    <div class="panel-header">
      <h2 class="panel-title" id="researchTitle">RESEARCH PAPER</h2>
      <button class="close-btn" aria-label="Close">&times;</button>
    </div>
    <div class="panel-content">
      <div class="panel-split">
        <div>
          <h3>From Curiosity to Career: Why Students Choose Computer Science</h3>
          <h4>Contributions:</h4>
          <ul>
            <li>Surveyed AIUB CS students</li>
            <li>Analyzed career motivations</li>
            <li>Identified key decision factors</li>
            <li>Explored future tech aspirations</li>
          </ul>
        </div>

        <aside class="panel-media">
          <div class="media-frame">
            <img
              src="img/ResearchPaper.jpg"
              alt="Research visuals: survey results and analysis"
              class="clickable-img"
              data-clickable="true"
              loading="lazy"
              decoding="async"
              onerror="this.onerror=null;this.src='data:image/svg+xml;utf8,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 400 300%22%3E%3Cdefs%3E%3ClinearGradient id=%22g%22 x1=%220%22 x2=%221%22%3E%3Cstop offset=%220%22 stop-color=%22%2300f7ff%22/%3E%3Cstop offset=%221%22 stop-color=%22%23ff00f7%22/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width=%22100%25%22 height=%22100%25%22 fill=%22%23101525%22 /%3E%3Crect x=%2212%22 y=%2212%22 width=%22376%22 height=%22276%22 rx=%228%22 fill=%22url(%23g)%22 opacity=%220.12%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 dominant-baseline=%22middle%22 text-anchor=%22middle%22 fill=%22%232b3d52%22 font-family=%22Montserrat, sans-serif%22 font-size=%2216%22%3ENo%20preview%20image%3C/text%3E%3C/svg%3E';"
            />
          </div>
          <div class="caption">Research visuals</div>
          <div class="media-actions">
            <a
              href="assets/ResearchPaper.zip"
              class="download-btn"
              download
              aria-label="Download Research Paper ZIP"
              data-clickable="true"
            >
              <i class="fa-solid fa-file-zipper" aria-hidden="true"></i>
              Download ZIP
            </a>
          </div>
        </aside>
      </div>
    </div>
  </div>

  <div class="info-panel" id="githubPanel" role="dialog" aria-modal="true" aria-labelledby="githubTitle" aria-hidden="true">
    <div class="panel-header">
      <h2 class="panel-title" id="githubTitle">GITHUB CONTRIBUTIONS</h2>
      <button class="close-btn" aria-label="Close">&times;</button>
    </div>
    <div class="panel-content">
      <h3>My Activity</h3>
      <p>GitHub contribution calendar.</p>
      <div id="contributions-grid" class="fade-in" aria-live="polite"></div>
    </div>
  </div>

  <div class="info-panel" id="contactPanel" role="dialog" aria-modal="true" aria-labelledby="contactTitle" aria-hidden="true">
    <div class="panel-header">
      <h2 class="panel-title" id="contactTitle">CONTACT ME</h2>
      <button class="close-btn" aria-label="Close">&times;</button>
    </div>

    <div class="panel-content">
      <h3>Social Profiles</h3>
      <div class="social-links">
        <a href="https://github.com/mahito-0" class="social-link github" aria-label="GitHub" target="_blank" rel="noopener">
          <i class="fa-brands fa-github"></i>
        </a>
        <a href="https://www.linkedin.com/in/syed-al-mahmud-45a671296/" class="social-link linkedin" aria-label="LinkedIn" target="_blank" rel="noopener">
          <i class="fa-brands fa-linkedin"></i>
        </a>
        <a href="https://facebook.com" class="social-link facebook" aria-label="Facebook" target="_blank" rel="noopener">
          <i class="fa-brands fa-facebook"></i>
        </a>
        <a href="https://www.instagram.com/not.end.masoom/" class="social-link instagram" aria-label="Instagram" target="_blank" rel="noopener">
          <i class="fa-brands fa-instagram"></i>
        </a>
      </div>

      <h3 style="margin-top: 28px;">Send a Message</h3>

      <form id="contact-form" class="contact-form" novalidate>
        <article class="letter glass">
          <div class="side">
            <p>
              <label for="message" class="sr-only">Message</label>
              <textarea id="message" name="message" placeholder="Your message" required minlength="5"></textarea>
            </p>
          </div>
          <div class="side">
            <p>
              <label for="name" class="sr-only">Name</label>
              <input type="text" id="name" name="name" placeholder="Your name" required>
            </p>
            <p>
              <label for="email" class="sr-only">Email</label>
              <input type="email" id="email" name="email" placeholder="Your email" required>
            </p>

            <!-- Honeypot (spam trap) -->
            <input type="text" name="website" id="website" tabindex="-1" autocomplete="off" style="position:absolute; left:-9999px; opacity:0;" aria-hidden="true">

            <p class="send-wrapper">
              <button id="sendLetter" type="submit">Send</button>
            </p>

            <p class="result-message" role="status" aria-live="polite"></p>
          </div>
        </article>
      </form>
    </div>
  </div>

  <!-- Image Modal -->
  <div id="img-modal" aria-modal="true" role="dialog" aria-hidden="true">
    <div class="img-modal-content">
      <button class="img-modal-close" aria-label="Close image">&times;</button>
      <img id="modal-img" alt="Zoomed image"/>
    </div>
  </div>

  <!-- Theme toggle: Dark/Light -->
  <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme" title="Toggle theme">🌙</button>

  <script>
    // ========= MAIN INITIALIZATION =========
    document.addEventListener('DOMContentLoaded', () => {
      setupTheme();                  // Dark/Light theme with persistence
      setupResponsiveFontSize();
      setupSmoothScrolling();
      setupContactForm();
      setupCustomCursor();
      setupImageModal();
      setupTypingAnimation();
      fetchGitHubProjects('mahito-0');
      loadGitHubContributions('mahito-0');
      setInterval(() => loadGitHubContributions('mahito-0'), 1000 * 60 * 30);

      window.addEventListener('scroll', handleScrollEffects, { passive: true });

      createParticles();
      initPanels();
      setupSkillsCarousel(); // Initialize the skills carousel

      // Recreate particles on resize (debounced)
      let resizeTimeout;
      window.addEventListener('resize', () => {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(createParticles, 200);
        if (window.emailjs?.init) {
          emailjs.init("S1gRkblDQXsFDT-SG"); 
        }
      }, { passive: true });
    });

    // ==================== THEME (DARK/LIGHT) ====================
    function setupTheme() {
      const btn = document.getElementById('themeToggle');
      const saved = localStorage.getItem('theme');
      const prefersLight = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches;
      const initial = saved || (prefersLight ? 'light' : 'dark');
      applyTheme(initial);

      btn.addEventListener('click', () => {
        const current = document.documentElement.getAttribute('data-theme') || 'dark';
        const next = current === 'dark' ? 'light' : 'dark';
        applyTheme(next);
        localStorage.setItem('theme', next);
      });

      function applyTheme(theme) {
        document.documentElement.setAttribute('data-theme', theme);
        btn.textContent = theme === 'dark' ? '🌙' : '☀️';
        btn.setAttribute('aria-label', `Switch to ${theme === 'dark' ? 'light' : 'dark'} mode`);
        updateMetaThemeColor(theme === 'dark' ? '#161616' : '#f6f8fb');
      }

      function updateMetaThemeColor(color) {
        let meta = document.querySelector('meta[name="theme-color"]');
        if (!meta) {
          meta = document.createElement('meta');
          meta.setAttribute('name', 'theme-color');
          document.head.appendChild(meta);
        }
        meta.setAttribute('content', color);
      }
    }

    // ==================== RESPONSIVE FONT ====================
    function setupResponsiveFontSize() {
      const setResponsiveFontSize = () => {
        const isMobile = window.innerWidth <= 768;
        document.documentElement.style.setProperty('--font-size-base', isMobile ? '14px' : '16px');
      };
      setResponsiveFontSize();
      window.addEventListener('resize', setResponsiveFontSize, { passive: true });
    }

    // ==================== SMOOTH SCROLL ====================
    function setupSmoothScrolling() {
      const supportsSmoothScroll = 'scrollBehavior' in document.documentElement.style;
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
          const targetId = this.getAttribute('href');
          if (targetId === '#') return;
          const targetElem = document.querySelector(targetId);
          if (!targetElem) return;
          e.preventDefault();
          const targetPosition = targetElem.getBoundingClientRect().top + window.pageYOffset;
          if (supportsSmoothScroll) window.scrollTo({ top: targetPosition, behavior: 'smooth' });
          else smoothScrollPolyfill(targetPosition, 800);
          targetElem.setAttribute('tabindex', '-1');
          targetElem.focus();
        });
      });
      function smoothScrollPolyfill(targetPosition, duration) {
        const startPosition = window.pageYOffset; const distance = targetPosition - startPosition; let startTime = null;
        function animation(currentTime) {
          if (startTime === null) startTime = currentTime;
          const timeElapsed = currentTime - startTime;
          const run = easeInOutQuad(timeElapsed, startPosition, distance, duration);
          window.scrollTo(0, run);
          if (timeElapsed < duration) requestAnimationFrame(animation);
        }
        function easeInOutQuad(t, b, c, d) { t /= d / 2; if (t < 1) return c / 2 * t * t + b; t--; return -c / 2 * (t * (t - 2) - 1) + b; }
        requestAnimationFrame(animation);
      }
    }

    // ==================== GITHUB FETCH ====================
    async function fetchGitHubProjects(username) {
      const projectsList = document.getElementById('projects-list');
      const cardTemplate = document.getElementById('card-template');
      if (!projectsList || !cardTemplate) return;

      const cacheKey = `gh-repos:${username}`;
      const ttlMs = 6 * 60 * 60 * 1000; // 6 hours
      let renderedFromCache = false;

      function renderRepos(reposRaw) {
        let repos = Array.isArray(reposRaw) ? reposRaw : [];
        repos = repos.filter(r => !r.fork && !r.archived)
                     .sort((a, b) => new Date(b.updated_at) - new Date(a.updated_at));

        projectsList.innerHTML = '';

        if (!repos.length) {
          projectsList.innerHTML = '<p>No public repositories found.</p>';
          return;
        }

        const placeholder = 'data:image/svg+xml;utf8,' + encodeURIComponent(`
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 225">
            <defs><linearGradient id="g" x1="0" x2="1"><stop offset="0" stop-color="#00f7ff"/><stop offset="1" stop-color="#ff00f7"/></linearGradient></defs>
            <rect width="100%" height="100%" fill="#101525" />
            <rect x="12" y="12" width="376" height="201" rx="8" fill="url(#g)" opacity="0.12" />
            <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#2b3d52" font-family="Montserrat, sans-serif" font-size="18">No preview image</text>
          </svg>
        `);

        for (const repo of repos) {
          const card = document.importNode(cardTemplate.content, true);
          const el = card.querySelector('.project-card');

          el.querySelector('.repo-link-title').textContent = repo.name || 'Repository';

          const link = el.querySelector('.repo-link');
          link.href = repo.html_url;
          link.rel = 'noopener noreferrer';
          link.textContent = 'View on GitHub';

          const desc = el.querySelector('.repo-description');
          desc.textContent = repo.description || 'No description available';

          el.querySelector('.repo-stars').textContent = `⭐ ${repo.stargazers_count ?? 0}`;
          el.querySelector('.repo-forks').textContent = `🍴 ${repo.forks_count ?? 0}`;

          const meta = el.querySelector('.project-meta');
          const updated = document.createElement('span');
          updated.className = 'badge dates';
          updated.textContent = `📅 Updated: ${repo.updated_at ? new Date(repo.updated_at).toLocaleDateString() : 'N/A'}`;
          meta.appendChild(updated);

          if (repo.language) {
            const lang = document.createElement('span');
            lang.className = 'badge';
            lang.textContent = `💻 ${repo.language}`;
            meta.appendChild(lang);
          }

          const img = el.querySelector('.project-image img');
          const imageUrl = `https://raw.githubusercontent.com/${username}/${repo.name}/main/img/proimg.png`;
          img.alt = `${repo.name} preview`;
          img.loading = 'lazy';
          img.decoding = 'async';
          img.src = imageUrl;
          img.onerror = () => { img.src = placeholder; };

          projectsList.appendChild(card);
        }
      }

      // Try cache first
      try {
        const cached = localStorage.getItem(cacheKey);
        if (cached) {
          const { ts, data } = JSON.parse(cached);
          if (Date.now() - ts < ttlMs) {
            renderRepos(data);
            renderedFromCache = true;
            return; // valid cache, skip network
          }
        }
      } catch (e) {
        // ignore cache errors
      }

      projectsList.innerHTML = '<p style="opacity:.8" role="status" aria-live="polite">Loading projects…</p>';

      const url = `https://api.github.com/users/${encodeURIComponent(username)}/repos?per_page=100&type=owner&sort=updated&direction=desc`;

      try {
        const response = await fetch(url, {
          headers: { 'Accept': 'application/vnd.github+json' }
        });

        if (response.status === 403) {
          const reset = response.headers.get('x-ratelimit-reset');
          const resetDate = reset ? new Date(parseInt(reset, 10) * 1000) : null;
          const msg = resetDate ? `GitHub API rate limit exceeded. Try again after ${resetDate.toLocaleTimeString()}.` : 'GitHub API rate limit exceeded. Try again later.';

          // Try stale cache if available
          const cached = localStorage.getItem(cacheKey);
          if (cached) {
            try {
              const { data } = JSON.parse(cached);
              renderRepos(data);
              projectsList.insertAdjacentHTML('afterbegin', `<p style="color:#ffcd70">Showing cached projects due to API limit. ${msg}</p>`);
              return;
            } catch {}
          }

          throw new Error(msg);
        }

        if (!response.ok) {
          throw new Error(`GitHub API error ${response.status}`);
        }

        const repos = await response.json();
        try {
          localStorage.setItem(cacheKey, JSON.stringify({ ts: Date.now(), data: repos }));
        } catch (e) {
          // storage might be full or disabled
        }
        renderRepos(repos);
      } catch (error) {
        console.error('Error fetching GitHub projects:', error);
        if (!renderedFromCache) {
          projectsList.innerHTML = `<p style="color:#ff6b6b">${error.message}</p>`;
        }
      }
    }

    // ==================== CONTACT FORM + EMAILJS ====================
    function setupContactForm() {
      const form = document.getElementById('contact-form');
      if (!form) return;

      form.addEventListener('submit', (e) => {
        e.preventDefault();
        sendmail();
      });
    }

    function sendmail() {
      const panel = document.getElementById('contactPanel');
      const message = panel.querySelector('#message')?.value.trim() || '';
      const name = panel.querySelector('#name')?.value.trim() || '';
      const email = panel.querySelector('#email')?.value.trim() || '';
      const honey = panel.querySelector('#website')?.value || '';
      const sendButton = panel.querySelector('#sendLetter');
      const resultMessage = panel.querySelector('.result-message');

      const show = (text, ok = false) => {
        if (!resultMessage) return;
        resultMessage.textContent = text;
        resultMessage.style.display = 'block';
        resultMessage.style.color = ok ? 'var(--badge-green)' : '#ff6b6b';
        clearTimeout(resultMessage._timer);
        resultMessage._timer = setTimeout(() => resultMessage.style.display = 'none', 5000);
      };

      // Basic validation
      if (honey) return; // bot
      if (!name || !email || !message) {
        show('Please fill out your name, email, and message.');
        return;
      }
      if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        show('Please enter a valid email address.');
        return;
      }

      // UI state
      if (sendButton) {
        sendButton.disabled = true;
        sendButton.textContent = 'Sending…';
      }

      const finalize = () => {
        if (sendButton) {
          sendButton.disabled = false;
          sendButton.textContent = 'Send';
        }
      };

      const templateParams = {
        from_name: name,
        reply_to: email,
        message: message,
      };

      // Try EmailJS if available
      if (window.emailjs) {
        try {
          if (!emailjs.__inited) {
            emailjs.init({ publicKey: 'S1gRkblDQXsFDT-SG' }); // your public key
            emailjs.__inited = true;
          }
        } catch (e) {
          console.warn('EmailJS init failed:', e);
        }

        emailjs
          .send('service_zsci4of', 'template_t5wnh4c', templateParams)
          .then(() => {
            show('Message sent successfully! ✅', true);
            const form = document.getElementById('contact-form');
            form && form.reset();
            finalize();
          })
          .catch((err) => {
            console.error('EmailJS send error:', err);
            show('Message failed to send. Please try again later.');
            finalize();
          });
      } else {
        // Fallback if EmailJS script didn’t load
        show('Email service is unavailable. Please email me directly: mahmud.agni@gmail.com');
        finalize();
      }
    }

    // ==================== CUSTOM CURSOR ====================
    function setupCustomCursor() {
      const cursor = document.querySelector('.custom-cursor');
      if (!cursor) return;

      const isTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
      if (isTouch) {
        cursor.style.display = 'none';
        return;
      }

      document.addEventListener('mousemove', (e) => {
        cursor.style.top = e.clientY + 'px';
        cursor.style.left = e.clientX + 'px';
        if (isClickable(e.target)) {
          cursor.classList.add('clickable-hover');
        } else {
          cursor.classList.remove('clickable-hover');
        }
      });

      function isClickable(element) {
        const interactiveSelectors = [
          'a[href]', 'button', 'input', 'select', 'textarea',
          '[role="button"]', '[role="link"]', '[contenteditable]',
          '[tabindex]:not([tabindex="-1"])', 'label', 'video',
          'audio', 'iframe', '[data-clickable]'
        ].join(',');
        return element.matches(interactiveSelectors) || element.closest(interactiveSelectors) !== null;
      }
    }

    // ==================== IMAGE MODAL & ZOOM ====================
    function setupImageModal() {
      const modal = document.getElementById('img-modal');
      const modalImg = document.getElementById('modal-img');
      const closeBtn = document.querySelector('.img-modal-close');
      if (!(modal && modalImg && closeBtn)) return;

      let scale = 1, isDragging = false, startX = 0, startY = 0, currentX = 0, currentY = 0;

      function initImageModal(img) {
        img.classList.add('clickable-img');
        img.addEventListener('click', () => {
          scale = 1; currentX = 0; currentY = 0;
          modalImg.style.transform = `translate(0, 0) scale(${scale})`;
          modal.style.display = 'flex';
          modal.setAttribute('aria-hidden', 'false');
          modalImg.src = img.src; modalImg.alt = img.alt || '';
          modalImg.style.cursor = 'grab';
        });
      }

      document.querySelectorAll('.clickable-img').forEach(initImageModal);

      const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
          mutation.addedNodes.forEach((node) => {
            if (node.nodeType === 1) {
              if (node.classList && node.classList.contains('clickable-img')) initImageModal(node);
              node.querySelectorAll?.('.clickable-img')?.forEach(initImageModal);
            }
          });
        });
      });
      observer.observe(document.body, { childList: true, subtree: true });

      function closeModal() {
        modal.style.display = 'none';
        modal.setAttribute('aria-hidden', 'true');
        isDragging = false;
        modalImg.style.cursor = 'grab';
        modalImg.classList.remove('dragging');
      }

      closeBtn.addEventListener('click', closeModal);
      modal.addEventListener('click', e => { if (e.target === modal) closeModal(); });

      modalImg.addEventListener('wheel', e => {
        e.preventDefault();
        const delta = e.deltaY > 0 ? -0.1 : 0.1;
        scale = Math.min(Math.max(1, scale + delta), 5);
        modalImg.style.transform = `translate(${currentX}px, ${currentY}px) scale(${scale})`;
      }, { passive: false });

      modalImg.addEventListener('mousedown', e => {
        if (scale <= 1) return;
        e.preventDefault();
        isDragging = true;
        startX = e.clientX - currentX;
        startY = e.clientY - currentY;
        modalImg.style.cursor = 'grabbing';
        modalImg.classList.add('dragging');
      });

      window.addEventListener('mouseup', () => {
        if (isDragging) {
          isDragging = false;
          modalImg.style.cursor = 'grab';
          modalImg.classList.remove('dragging');
        }
      });

      window.addEventListener('mousemove', e => {
        if (!isDragging) return;
        currentX = e.clientX - startX;
        currentY = e.clientY - startY;
        modalImg.style.transform = `translate(${currentX}px, ${currentY}px) scale(${scale})`;
      });

      // Touch support
      let lastTouchDist = null, lastTouchX = null, lastTouchY = null;
      modalImg.addEventListener('touchstart', e => {
        if (e.touches.length === 2) {
          lastTouchDist = getTouchDist(e.touches);
        } else if (e.touches.length === 1 && scale > 1) {
          lastTouchX = e.touches[0].clientX - currentX;
          lastTouchY = e.touches[0].clientY - currentY;
        }
      }, { passive: false });

      modalImg.addEventListener('touchmove', e => {
        e.preventDefault();
        if (e.touches.length === 2) {
          const currentDist = getTouchDist(e.touches);
          if (lastTouchDist !== null) {
            let deltaScale = (currentDist - lastTouchDist) / 200;
            scale = Math.min(Math.max(1, scale + deltaScale), 5);
            modalImg.style.transform = `translate(${currentX}px, ${currentY}px) scale(${scale})`;
          }
          lastTouchDist = currentDist;
        } else if (e.touches.length === 1 && scale > 1) {
          currentX = e.touches[0].clientX - lastTouchX;
          currentY = e.touches[0].clientY - lastTouchY;
          modalImg.style.transform = `translate(${currentX}px, ${currentY}px) scale(${scale})`;
        }
      }, { passive: false });

      modalImg.addEventListener('touchend', e => { if (e.touches.length < 2) lastTouchDist = null; });

      function getTouchDist(touches) {
        const dx = touches[0].clientX - touches[1].clientX;
        const dy = touches[0].clientY - touches[1].clientY;
        return Math.hypot(dx, dy);
      }
    }

    // ==================== TYPING ====================
    function setupTypingAnimation() {
      const typingText = document.getElementById('typingText');
      if (!typingText) return;

      const lines = [
        "Software Developer",
        "Web Developer",
        "App Developer",
        "AI/ML Enthusiast",
        "Game Developer",
        "Tech Learner",
        "Algorithm Explorer",
        "System Enthusiast",
        "Cloud Explorer",
        "UI/UX Designer"
      ];

      let lineIndex = 0, charIndex = 0, isDeleting = false;
      const typingSpeed = 100, pauseBetweenLines = 1500;

      function type() {
        const currentLine = lines[lineIndex % lines.length];

        if (isDeleting) {
          typingText.textContent = currentLine.substring(0, charIndex - 1);
          charIndex--;
          if (charIndex === 0) {
            isDeleting = false;
            lineIndex++;
            setTimeout(type, typingSpeed);
          } else {
            setTimeout(type, typingSpeed / 2);
          }
        } else {
          typingText.textContent = currentLine.substring(0, charIndex + 1);
          charIndex++;
          if (charIndex === currentLine.length) {
            isDeleting = true;
            setTimeout(type, pauseBetweenLines);
          } else {
            setTimeout(type, typingSpeed);
          }
        }
      }
      type();
    }

    // ==================== SCROLL EFFECTS ====================
    function handleScrollEffects() {
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      const parallaxElements = document.querySelectorAll('.parallax');
      parallaxElements.forEach(el => {
        const speed = parseFloat(el.getAttribute('data-speed') || '0.5');
        el.style.backgroundPositionY = `${scrollTop * speed}px`;
      });
      const fadeElements = document.querySelectorAll('.fade-in');
      fadeElements.forEach(el => {
        if (el.getBoundingClientRect().top < window.innerHeight - 100) {
          el.classList.add('visible');
        } else {
          el.classList.remove('visible');
        }
      });
      const header = document.querySelector('header');
      if (header) {
        if (scrollTop > 50) header.classList.add('sticky');
        else header.classList.remove('sticky');
      }
    }

    // ==================== GITHUB CONTRIBUTIONS GRID ====================
    function loadGitHubContributions(username) {
      const container = document.getElementById('contributions-grid');
      if (!container) return;
      const timestamp = new Date().getTime();
      const url = `https://ghchart.rshah.org/${username}?t=${timestamp}`;
      container.innerHTML = `<img src="${url}" alt="${username}'s GitHub contributions" loading="lazy" decoding="async" style="max-width:100%; border-radius:8px; border:1px solid rgba(255,255,255,0.12); background:rgba(255,255,255,0.03); padding:6px;">`;
      if (document.documentElement.getAttribute('data-theme') === 'light') {
        container.firstChild.style.background = '#fff';
        container.firstChild.style.borderColor = 'rgba(15,23,42,0.12)';
      }
    }

    // ==================== PARTICLES ====================
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      if (!particlesContainer) return;
      particlesContainer.innerHTML = '';
      const isSmall = window.innerWidth <= 768;
      const particleCount = isSmall ? 24 : 50;

      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.classList.add('particle');
        const size = Math.random() * 3 + 1;
        const posX = Math.random() * 100;
        const posY = Math.random() * 100;
        const delay = Math.random() * 5;
        const duration = Math.random() * 5 + 5;

        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.style.left = `${posX}%`;
        particle.style.top = `${posY}%`;
        particle.style.animationDelay = `${delay}s`;
        particle.style.animationDuration = `${duration}s`;
        particlesContainer.appendChild(particle);
      }
    }

    // ==================== PANELS ====================
    function initPanels() {
      const cards = document.querySelectorAll('.card');
      const panelOverlay = document.getElementById('panelOverlay');
      const closeButtons = document.querySelectorAll('.close-btn');
      const container = document.querySelector('.container');

      // Make cards keyboard focusable and act like buttons
      cards.forEach(card => {
        card.setAttribute('tabindex', '0');
        card.setAttribute('role', 'button');
        card.addEventListener('click', () => openPanel(card));
        card.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            openPanel(card);
          }
        });
      });

      function openPanel(card) {
        const panelId = card.getAttribute('data-panel') + 'Panel';
        const panel = document.getElementById(panelId);
        if (!panel) return;
        container.classList.add('blur');
        panelOverlay.classList.add('active');
        panel.classList.add('active');
        panelOverlay.setAttribute('aria-hidden', 'false');
        panel.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden';

        // Focus the close button for accessibility
        const close = panel.querySelector('.close-btn');
        close && close.focus();
      }

      function closeAllPanels() {
        const panels = document.querySelectorAll('.info-panel');
        panels.forEach(panel => {
          panel.classList.remove('active');
          panel.setAttribute('aria-hidden', 'true');
        });
        panelOverlay.classList.remove('active');
        panelOverlay.setAttribute('aria-hidden', 'true');
        container.classList.remove('blur');
        document.body.style.overflow = '';
      }

      closeButtons.forEach(button => button.addEventListener('click', closeAllPanels));
      panelOverlay.addEventListener('click', closeAllPanels);
      document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeAllPanels(); });
    }

    // ==================== SKILLS CAROUSEL ====================
    function setupSkillsCarousel() {
      const tracks = document.querySelectorAll('#skillsPanel .skills-track .skills-inner');

      tracks.forEach(track => {
        if (!track) return;

        // If not long enough, clone items to make the loop feel seamless
        if (track.children.length < 30) {
          const itemsHTML = track.innerHTML;
          track.innerHTML = itemsHTML + itemsHTML + itemsHTML; // triple for smoothness
        }

        // Duration scales with item count so speed feels consistent
        const perItem = 1.8; // seconds per item
        const duration = Math.max(30, Math.round(track.children.length * perItem));
        track.style.animationDuration = `${duration}s`;
      });

      // Pause on hover
      const carousel = document.querySelector('#skillsPanel .skills-carousel');
      if (carousel) {
        carousel.addEventListener('mouseenter', () => {
          carousel.querySelectorAll('.skills-inner').forEach(el => el.style.animationPlayState = 'paused');
        });
        carousel.addEventListener('mouseleave', () => {
          carousel.querySelectorAll('.skills-inner').forEach(el => el.style.animationPlayState = 'running');
        });
      }
    }
  </script>
</body>
</html>